{% extends "app/layout.html" %}

{% load staticfiles %}

{% block content %}

<h2>{{ title }}</h2>
<h3>{{ message }}</h3>

<div class="row">
    <div class="col-md-6">
        <h3>Контактная информация</h3>
        <address>
            <strong>Полное наименование:</strong><br />
            Государственное бюджетное учреждение здравоохранения Псковской области<br />
            «Островская межрайонная больница»
        </address>

        <address>
            <strong>Адрес:</strong><br />
            181350, Псковская область, г.&nbsp;Остров, ул.&nbsp;К.&nbsp;Маркса, д.&nbsp;10
        </address>

        <address>
            {# Телефоны на официальном сайте могут быть разделены по подразделениям; здесь можно указать основные #}
            <strong>E‑mail:</strong> <a href="mailto:ostrovrb@zdrav.pskov.ru">ostrovrb@zdrav.pskov.ru</a>
        </address>

        <p>
            Подробная информация о режиме работы подразделений, телефонах регистратур и приёмных отделений
            доступна на официальном сайте учреждения
            <a href="https://ostrovmb.ru/" target="_blank">ostrovmb.ru</a>.
        </p>

        <div class="text-center">
            <img src="{% static 'app/content/map_ostrovmb.png' %}"
                 alt="Карта расположения Островской межрайонной больницы"
                 class="img-responsive img-thumbnail"
                 style="margin: 20px auto;">
        </div>
    </div>

    <div class="col-md-6">
        <h3>Запись на приём к врачу</h3>
        
        {% if appointment_success %}
            <div class="alert alert-success" role="alert">
                <strong>Запись успешно создана!</strong><br />
                Ваша заявка на приём к врачу принята. С вами свяжутся для подтверждения записи.<br />
                <a href="{% url 'appointments' %}" class="alert-link">Посмотреть все записи на приём</a>
            </div>
        {% endif %}

        {% if appointment_form %}
            <form method="post" action="{% url 'contact' %}">
                {% csrf_token %}
                
                <div class="form-group">
                    <label for="{{ appointment_form.patient_name.id_for_label }}">{{ appointment_form.patient_name.label }}</label>
                    {{ appointment_form.patient_name }}
                    {% if appointment_form.patient_name.errors %}
                        <div class="text-danger">
                            {% for error in appointment_form.patient_name.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ appointment_form.doctor.id_for_label }}">{{ appointment_form.doctor.label }}</label>
                    {{ appointment_form.doctor }}
                    {% if appointment_form.doctor.errors %}
                        <div class="text-danger">
                            {% for error in appointment_form.doctor.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ appointment_form.appointment_date.id_for_label }}">{{ appointment_form.appointment_date.label }}</label>
                    {{ appointment_form.appointment_date }}
                    {% if appointment_form.appointment_date.errors %}
                        <div class="text-danger">
                            {% for error in appointment_form.appointment_date.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ appointment_form.appointment_time.id_for_label }}">{{ appointment_form.appointment_time.label }}</label>
                    {{ appointment_form.appointment_time }}
                    {% if appointment_form.appointment_time.errors %}
                        <div class="text-danger">
                            {% for error in appointment_form.appointment_time.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ appointment_form.phone.id_for_label }}">{{ appointment_form.phone.label }}</label>
                    {{ appointment_form.phone }}
                    {% if appointment_form.phone.errors %}
                        <div class="text-danger">
                            {% for error in appointment_form.phone.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ appointment_form.email.id_for_label }}">{{ appointment_form.email.label }}</label>
                    {{ appointment_form.email }}
                    {% if appointment_form.email.errors %}
                        <div class="text-danger">
                            {% for error in appointment_form.email.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ appointment_form.comment.id_for_label }}">{{ appointment_form.comment.label }}</label>
                    {{ appointment_form.comment }}
                    {% if appointment_form.comment.errors %}
                        <div class="text-danger">
                            {% for error in appointment_form.comment.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <button type="submit" class="btn btn-primary">Записаться на приём</button>
            </form>
        {% endif %}
    </div>
</div>

<p style="margin-top: 30px;"><strong>Внимание!</strong> Возможны противопоказания. Необходима консультация специалиста.</p>

{% endblock %}
